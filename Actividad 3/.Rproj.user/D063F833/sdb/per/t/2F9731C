{
    "contents" : "---\ntitle: \"Estimación estadística del Ancho de Banda Efectivo\"\nauthor: \"Natalia Clivio\"\ndate: '2015'\noutput: pdf_document\n---\n\nEl ancho de banda efectivo es una medida usada en el dimensionamiento y planeamiento de redes de comunicaciones modernas. El objetivo de este análisis, es estimar el ancho de banda efectivo para distintos modelos de tráfico y compararlo con la traza conocida como la de Bellcore y ver que modelo se ajusta al comportamiento de la traza.\n\nEn cuanto a su estimación hay dos enfoques, el paramétrico y el no paramétrico. En el enfoque paramétrico se asume un modelo de la fuente de tráfico y a partir de las trazas se estima un conjunto de parámetros de dicho modelo. De esa forma se obtiene un estimador del ancho de banda efectivo y además es posible calcular su intervalo de confianza. En el enfoque no paramétrico, no se asume un modelo específico del tráfico y se procura construir un estimador del ancho de banda efectivo calculando el valor esperado que aparece en la función generatriz de momentos a través de promedios temporales en la traza.\n\nEl presente análisis, se realiza con un enfoque paramétrico donde se trabaja con la traza conocida de Bellcore, modelos sencillos como el movimiento browniano, seguido de Fluido de Markov ON/OFF, movimiento fraccional browniano y modelo de FARIMA ya que estos modelos presentan una variadad de características observadas en muchas formas en el tráfico real.\n\n\n##Traza de Tráfico Ethernet\n####Traza Bellcore\nEsta traza de tráfico de BELLCORE labs, esta traza contiene 1000000 de paquetes y se encuentran en dos columnas, en formato ASCII, veinte bytes por línea. La primera línea muestra el tiempo en segundos desde el comienzo de la traza. La segunda columna muestra el tamaño del paquete en bytes, incluyendo parte del encabezado y el código de redundancia cíclica (CRC), tener encuenta que que con el protocolo Ethernet los paquetes poseen un tamaño mínimo de 64 bytes y un máximo de 1.518 bytes.\n\n```{r echo=FALSE, fig.show='hide'}\npackets<-read.csv(\"C:/Users/NataliaA/Documents/Maestria/Tráfico L3/Bellcore/BC-pAug89.csv\",\n                  header=TRUE,sep=\";\",na.strings=\"NA\",dec=\".\")\n\ndataset<-data.frame(Seconds=packets$Seconds,Bytes=packets$Bytes)\n\nvector<-dataset$Seconds\nlast=tail(vector,n=1)\nunit_time=0.5\nstep=last/unit_time\nh_data<-hist(vector,breaks=step)              \n````\n\nLa traza Bc-pAug89 comienza a las 11:25 el 29 de agosto de 1989, capturó datos alrededor de 3.142,82 s (aproximadamente 1.000.000 paquetes fueron capturados).\n\n````{r echo=FALSE}\nbelly<-c(0,h_data$counts)\nbellx<-h_data$breaks\nplot(bellx,belly,type=\"l\",xlab=\"time (s)\",ylab=\"Packets\",main=\"Bellcore trace\", ylim=c(0,500))\n````\n\n\nPara los experimentos a continuación, se emplearán trazas con una longitud de 512.\n\n\n##Procesos de Renovación: Modelos con Incrementos Independientes\n####Flujo con Movimiento Browniano\n\nEl movimiento browniano se ha utilizado como un caso limitado del tráfico pesado y también proporciona un inicio al análisis para el tráfico de movimiento browniano fraccional tratado más adelante.[1]\n\n````{r echo=FALSE, warning=FALSE}\nlibrary(somebm)\nset.seed(1200)\nbmdata <- bm(x0=1, t0=0.01, t=3000, n=500)\nplot(bmdata, xlab=\"time (s)\",ylab=\"x\",main=\"Brownian motion trace\")\n````\n\nSi se considera un proceso browniano con una longitud de 512 valores y los siguientes prámetros:\n\nTaza promedio de arribo $\\hat{\\mu} = 50.83$\nVarianza de la taza de arribo $\\hat{\\theta^2} = 30.18$\n\n\nEl flujo tiene una taza de servicio de C=52, un buffer de tamaño B=5.\n\nCalculando el punto crítico $\\boldsymbol{\\alpha(s,t)}$, que está determinado por: [1]:\n\n$$\\alpha(s,t)=\\mu + \\frac{(s\\theta^2)}{2}$$\n\nEsta fuente es de tipo gaussiano y su cálculo de ancho de banda efectivo no depende de t ya que es un proceso de incrementos independientes. Además es lineal en s.[4] \n\n````{r}\nC<-52 #tasa de servicio\nu<-50.83\nvar<-30.18\ns<-(2*(C-u))/var\nBWE_MB<-u+((s*var)/2)\nBWE_MB\n\n#Variando el parámetro s, se obtiene:\nu<-seq(length=30, from=10, to=60) \ns<-(2*(C-u))/var\nBWE_MB<-u+((s*var)/2)\nplot(s,BWE_MB,pch=20)\nlines(s,BWE_MB,col=\"blue\")\n````\n\nEl cálculo del ancho de banda efectivo de este modelo depende del valor C.\n\n\n##Modelos dependientes con rango corto (SRD)\n####Flujo de markov discreto ON/OFF\n\nSe supone un conjunto de fuentes que alternan periodos on/off y que exhiben el efecto \"Noah\" (síndrome de varianza infinita). El periodo ON es aquel en el se transmite información a velocidad constante y el periodo OFF corresponde al tiempo entre transmisiones. Este el flujo de tráfico agregado no presenta cor-\nrelación a largo plazo.\n\nSi el flujo Markoviano modulado por una cadena de Markov con dos estados 0 (OFF) y h (ON). Mientras la cadena está en el estado h se produce trabajo a tasa constante h, mientras está en el estado 0 no se produce trabajo.\nEl generador infinitesimal de la cadena es la matriz Q y H es una matriz diagonal con elementos hi en la diagonal[4]:\n\n$$ Q = \\begin{pmatrix} -\\lambda & \\lambda \\\\ \\mu & -\\mu\\end{pmatrix}$$\n\n$$ H = \\begin{pmatrix} 0 & 0 \\\\ 0 & h\\end{pmatrix}$$\n\ndonde $\\lambda$¸ se interpreta como la cantidad de transiciones del estado 0 al estado h por unidad de tiempo y $\\mu$ como la cantidad de transiciones que salen de 0 por unidad de tiempo. $\\vec{\\pi}$ es la distribución estacionaria de la cadena, este es un vector de probabilidad $\\pi$ tal que $\\pi Q =\\vec{0}$ , la distribución invariante de la cadena es:\n\n$$\\pi =\\left(\\frac{\\mu}{\\lambda + \\mu};\\frac{\\lambda}{\\lambda + \\mu}\\right)$$\n\nTomando como distribución inicial de la cadena la distribución invariante, el ancho de banda efectivo que resulta es:\n\n$$\\boldsymbol{\\alpha(s,t)=log\\{ \\vec{\\pi} exp[(Q + Hs) t] \\vec{1} \\}}$$\n\nReemplazando, se obtiene:\n\n$\\alpha(s,t)=$ $log\\{(\\frac{\\mu}{\\lambda + \\mu};\\frac{\\lambda}{\\lambda + \\mu})$ $exp(\\begin{smallmatrix} -\\lambda & \\lambda \\\\ \\mu & -\\mu\\end{smallmatrix})$ $t \\vec{1} \\}$\n\nPara simular este fluo, se considera:\n$\\lambda =$ $\\mu= 0.01,$ $h= 0.01$ y $n= 10000.$\n\nAplicando un estimador markoviano EMV, los valores obtenidos son:\n\nCalculando el ancho de banda $\\alpha(s,t)$:\n\n````{r}\nl<-0.4#0.01012  #0.4\nu<-0.3#0.01034  #0.3\nh<-3#0.01     #3\nQ<-matrix(c(-l,u,l,-u),2,2)\nH<-matrix(c(0,0,0,h),2,2)\nV<-matrix(1,2,2)\nQ\nH\n````\n\n````{r}\nBWEonoff<-(u*l*h^2)/(l+u)^2 #veroficar porque no se de donde sale esta eq\nBWEonoff\n````\n\nCalculando el punto crítico **(s,t)**\n````{r warning=FALSE}\n\n#Distribución invariante es un vector de probabilidad pi tal que piQ=0, \n#entonces:\n\npi1<-l/(l+u)\npi2<-u/(l+u)\n\nspace<-seq(length=50, from=1, to=100) #0.5 to 5 0 to 4000\ntime<-seq(length=50, from=0, to=30) #ms 1 to 30 1 to 20\ns<-log10(space)\nt<-(time)\n\nBw<-function(t,s) {(1/s)*log10(pi2+(exp((h*s))*pi1))}   \nz<-outer(t,s,Bw) # La función outer evalua la función Bw en cada punto (si,tj)\n````\n\n````{r echo=FALSE}\nnrz<-nrow(z)\nncz<-ncol(z)\n\n# Create a function interpolating colors in the range of specified colors\njet.colors<-colorRampPalette(c(\"blue\",\"violet\"))\n\n# Generate the desired number of colors from this palette\nnbcol<-100\ncolor<-jet.colors(nbcol)\n# Compute the z-value at the facet centres\nzfacet<-z[−1,−1]+z[−1,−ncz]+z[−nrz,−1] +z[−nrz,−ncz]\n\n# Recode facet z-values into color indices\nfacetcol<-cut(zfacet,nbcol)\n````\n\n````{r}\npersp(t,s,z,theta=-30,phi=0,col = color[facetcol],\n      sub=\"Ancho de banda efectivo de una fuente ON/OFF\",\n      ticktype = \"detailed\",xlab=\"time (ms)\",ylab=\"space (s)\",zlab=\"(s,t)\")  \n````\n\nlibrary(rgl)\npersp3d(t,s,z,theta=-30,phi=0,col = color[facetcol],front=\"lines\", \nsub=\"Ancho de banda efectivo de una fuente ON/OFF\",\nticktype = \"detailed\",xlab=\"time (ms)\",ylab=\"space (s)\",zlab=\"(s,t)\")\n\n\n##Modelos dependientes con rango largo (LRD)\n####Movimiento fraccional browniano\nEl movimiento browniano fraccional es un proceso Gaussiano BH(t) de media\ncero con autosimilitud perfecta, con parámetro H que, a diferencia del modelo\nM/Pareto, se extiende entre 0 y 1.\nEl movimiento browniano es utilizado en eldimensionado de recursos, el cálculo del retardo extremo a extremo y el multiplexado de fuentes de tráfico.[2]\n\n\n````{r echo=FALSE, warning=FALSE}\nlibrary(somebm)\nfbmdata <- fbm(hurst=0.75, n=3000)\nplot(fbmdata, xlab=\"time (s)\",ylab=\"Packets\",main=\"Fractional brownian motion trace\")\n````\n\nTeniendo en cuenta las características autosimilares de esta traza de tráfico y que siga un modelo de movimiento fraccional browniano,  entonces se puede suponer para el modelo una llegada de los datos en intervalos de tiempo t dada por:\n\n$$X[\\tau,\\tau+t]=\\lambda t+Z(t)$$\n \ndonde Z(t) corresponde al movimiento fraccional browniano con Var[Z(t)]=o^2*t^(2*H) para un parámetro de HURTS *H* entre 0 y 1, entonces[3]: \n\n$$\\alpha(s,t)=\\lambda + \\frac{\\theta^2 t^{(2H-1)}}{2}s$$\n\nA continuación se calcula el ancho de banda efectivo de una traza con movimiento fraccional browniano con parámetro Hurst H=0.75, y los siguientes parámetros [1]:\n\nTaza promedio de arribo $\\hat{\\mu} = 35.09$\nVarianza de la taza de arribo $\\hat{\\theta^2} = 25.53$\n\nEl flujo tiene una taza de servicio de C=37, un buffer de tamaño B=5.\n\nCalculando el punto crítico $\\boldsymbol{\\alpha(s,t)}$\n\n````{r}\n#Cálculo analítico del ancho de banda efectivo de la traza\nC<-37\nB<-5\nu<-35.09\nvar<-25.53\nH<-0.75\n\nt<-(B/(C-u))*(H/(1-H))      \ns<-(B+(C-u)*t)/(var*t^(2*H))\nt\ns\n\nBw_MFB<-u+(((s*var)/2)*(t^(2*H-1)))\nBw_MFB\n````\n\nCalculando el ancho de banda efectivo, se obtiene:\n\n````{r}\n#Cálculo estadístico del ancho de banda efectivo de la traza\nt<-log10(seq(length=100, from=1, to=200))    #time parameter (ms)\ns<-log10(seq(length=100, from=1, to=5)) #space parameter (bytes^-1)\n\nBw<-function(t,s) {u+(((s*var)/2)*(t^(2*H-1)))}   \nz<-outer(t,s,Bw) # La función outer evalua la función Bw en cada punto (si,tj)\n\npersp((t),(s),(z),theta=20,phi=-0,col =\"lightblue\", sub=\"Ancho de Banda Efectivo de un proceso con movimiento fractal browniano\"\n      ,ticktype =\"detailed\",xlab=\"t (ms)\",ylab=\"s\",zlab=\"(s,t)\")  \n````\n\n````{r}\n#Cálculo estadístico del ancho de banda efectivo de la traza\nC<-37\nu<-35.09\nvar<-25.53\nH<-0.75\nB<-(seq(length=50, from=1, to=100))\n\ntime<-function(C,B) {(B/(C-u))*(H/(1-H))}   \nt<-outer(C,B,time) #time parameter (ms)\nt<-log10(as.numeric(t))\n\nspace<-function(C,B) {(B+(C-u)*t)/(var*t^(2*H))}   \ns<-outer(C,B,space) #space parameter (bytes^-1)\ns<-(as.numeric(s))\n````\n\nLos ejes tienen escala logarítmica (base 10) con s en unidades de $bytes^-1$, t en segundos y $\\alpha(s,t)$ en bytes por segundo.\n\n````{r}\n#Bw<-function(t,s) {(u+(((s*var)/2)*(t^(2*H-1))))}   \n#z<-outer(t,s,Bw) # La función outer evalua la función Bw en cada punto(si,tj)\n\n#persp((t),(s),(z),theta=20,phi=-0,col =\"lightblue\", sub=\"Ancho de Banda Efectivo de un proceso con movimiento fractal browniano\"\n#      ,ticktype =\"detailed\",xlab=\"t (ms)\",ylab=\"s\",zlab=\"(s,t)\")  \n````\n\npersp3d((t),(s),(z),theta=20,phi=-0,col =\"green\", front=\"lines\", sub=\"Ancho de Banda Efectivo de un proceso con movimiento fractal browniano\"\n      ,ticktype =\"detailed\",xlab=\"t (ms)\",ylab=\"s\",zlab=\"(s,t)\")  \n      \npersp3d(t,s,z,theta=-30,phi=0,col = \"tomato\",front=\"lines\", \nsub=\"Ancho de Banda Efectivo de un proceso con movimiento fractal browniano\",\nticktype = \"detailed\",xlab=\"time (ms)\",ylab=\"space (s)\",zlab=\"(s,t)\")\n\n####$\\alpha$-Stable Farima \nEste modelo se usa en el estudio de las redes modernas de tráfico,con tendencia a incrementos con colas pesadas y procesos de dependencia de rango largo.\n\nConsiderando un flujo de longitud 512 con dependencia de rango largo y con incrementos de cola pesada. Con parámetros: \n\nTaza promedio de arribo $\\hat{\\mu} = 24.968$\nVarianza de la taza de arribo $\\hat{\\theta^2} = 4.058$\n\nEl flujo tiene una taza de servicio de C=25, un buffer de tamaño B=4.Como no hay una fórmula para determinar el punto crítico, se emplea la misma del movimiento browniano\n\nCalculando el ancho de banda efectivo, se obtiene:\n$$\\alpha(s,t)=\\mu + \\frac{(s*\\theta^2)}{2}$$\n\n````{r}\nC<-25\nB<-4\nu<-24.968\nvar<-4.058\n\ns<-(2*(C-u))/var\nt<-B/(C-u)\n\nBw_MB<-u+((s*var)/2)\nBw_MB\n\n````\n\nEl valor esperado es que el ancho de banda efectivo sea sustancialmente mayor que la taza promedio de arribo, por lo tanto se debería usar otro estimador para hacer el cálculo.\n\nPara un modelo F-Arima con las siguientes características:\n\n````{r}\nlibrary(fArma)\n\na<-farimaTrueacf(n = 100, H = 0.7)\nb<-farimaTruefft(n = 100, H = 0.7)\nfarimaStatsSlider() #Una pantalla automática de las anteriores funciones\n\nc<-farimaSim(n = 1000, model = list(ar = c(0.5, -0.5), d = 0.3, ma = 0.1),\n    method = c(\"freq\", \"time\"), ...) \n\n function(n = 1000, model = list(ar = c(0.5, -0.5), d = 0.3, ma = 0.1),\n\n                    method = c(\"freq\", \"time\"), ...)\n# Parameters (2,d,1):\n#p=length(ar) and q=length(ma) and d is a fractional value\nn = 3000\nd = 0.2\nH = d + 0.5\nset.seed(1953)\nx = farimaSim(n, model = list(d = 0.2))\nplot(x, main=\"F-Arima Model (p,d,q)\")\n\n# Sample and True ACF:\n\tacf(x, main = \"FARIMA: ACF\")\n\ty = farimaTrueacf(41, H)\n\tpoints(0:40, y, col = \"red\")\n\t###\n\t\n\t# Simple - Fit Hurst Exponent from True ACF:\n\tcoef = lsfit(x = log(1:40), y = log(y[-1]))$coef\n\tbeta = coef[[2]]\n\tH.estimated = (beta+2)/2\n\tH.estimated\n\t###\n\t\n\t# Sample and True Spectrum:\n\ts = spectrum(x, plot = FALSE)$spec\n\tplot(s, type = \"h\", ylim = c(0, 60), main = \"FARIMA: Spectrum\")\n\ty = Re(farimaTruefft(n, H))\n\tlines(0:(n/2-1), y[1:(n/2)], col = \"red\")\n\t###\n\t\n\t# Double Logarithmic Plot:\n\tplot(log(1:length(s)), log(s), type = \"l\", main = \"log-log Spectrum\")\n\tlines(log(1:(n/2)), log(y[1:(n/2)]), col = \"red\")\n\t###\n\t\n\t# Simple Fit - Hurst Exponent from True Spectrum:\n\tcoef = lsfit(x = log(1:length(s)), y = log(s))$coef\n\tbeta = coef[[2]]\n\tH = (1-beta)/2\n\tH\n\t###\n````\n\n\n##Ancho de banda efectivo para una fuente de Tráfico Ethernet\n###Traza Bellcore\nPara este análisis se considera una muestra de los primeros 512 segundos que corresponden a 1025 bytes por segundo\n\n````{r echo=FALSE, warning=FALSE}\n#library(quantmod)\nset_belly<-head(belly,1025) #packet size\nset_bellx<-head(bellx,1025) #time\n\nplot(set_bellx,set_belly,type=\"l\",xlab=\"time (ms)\",ylab=\"Packets\",main=\"Muestra Bellcore trace\", ylim=c(0,500))\nabline(v=NULL,h=400,lty=3,col=\"green\")\nabline(v=NULL,h=35,lty=3,col=\"green\")\n````\n\nConsiderando los parámetros siguientes parámetros:\n\n````{r}\n#Parámetros de la población\nsummary.(belly)\n#Media\nl<-mean(belly)/100\n#Varianza\n#Desviación Típica\n\n#Parámetros de la muestra\nsummary(set_belly)\n#Media\n#Varianza\n#Desviación Típica\n````\n\nTaza promedio de arribo $\\hat{\\mu} = 1.591$\nVarianza de la taza de arribo $\\hat{\\theta^2} = 4.169$\n\n\nEl flujo tiene una taza de servicio de C=2.9, un buffer de tamaño B=0.3 (300 Bytes). Ya que no hay una fórmula para el cálculo, se usarán los estimadores anteriormente descritos: \n\n**Estimador de movimiento browniano.**\n\nCalculando el punto crítico $\\boldsymbol{\\alpha(s,t)}$, que está determinado:\n\n````{r}\n#Muestra en Kbps\n\nC<-2.9\nB<-0.3\nu<-1.591\nvar<-4.169\n\ns<-(2*(C-u))/var\nt<-B/(C-u)\n\nBw_MB<-u+((s*var)/2)\nBw_MB\n\n\n\n````\n\n**EStimador con movimiento fractal browniano**\n\nCalculando el parámetro Hurts de la traza:\n````{r echo=FALSE,warning=FALSE}\nlibrary(fArma)\nlibrary(longmemo)\n\ndata(ethernetTraffic)\nx<-ethernetTraffic\nsummary(x)\n\nRS<-rsFit(x, levels = 50, minnpts = 3, cut.off = 10^c(0.7, 2.5),\n      doplot = TRUE, trace = FALSE, title = NULL, description = NULL)\n\nH<-data.frame(RS@hurst)$H[1]\n\n\n````\n\n\nR/S Rescaled Range Statistic method\n\n![Alt text](C:/Users/NataliaA/Documents/DataR/Hurts/rsFit.png)\n\nTomando como referencia los siguientes parámetros se calcula el ancho de banda:\n\n````{r}\nC<-2.9\nB<-0.3\nu<-1.591\nvar<-0.4350589  \nH<-0.7164\n\nt<-(B/(C-u))*(H/(1-H))      \ns<-(B+(C-u)*t)/(var*t^(2*H)) \nt\ns\n\nBw_MFB<-u+(((s*var)/2)*(t^(2*H-1)))\nBw_MFB\n````\n\nSe obtiene una mejor aproximación con el modelo fractal browniano para la traza de datos ya que el valor del ancho de banda efectivo de la traza es superior a la taza promedio de arribo.\n\n##**Intervalo de Confianza del Ancho de Banda**\n### Movimiento Browniano\n````{r}\nset_belly\ndataKb<-belly/100\nsummary(set_belly)\nu<-mean(dataKb)\nvar<-var(dataKb)\n\nC<-2.9\nB<-0.3\n\ns<-(2*(C-u))/var\nt<-B/(C-u)\n\nBw_MB<-u+((s*var)/2)\nBw_MB\n\nBw_MB <- function(s,u) \n{    m <- mean(d$hours[i])\nn <- length(i)\nv <- (n-1)*var(d$hours[i])/n^2\nc(m, v)\n}\n\n\nB_MB<-boot(dataKb,Bw_MB,R=100)\n\nC<-37\nB<-5\nu<-35.09\nvar<-25.53\n\nH<-0.7164\nu<-mean(dataKb)\nvar<-var(dataKb)\nu\nvar\n\n> u\n[1] 1.590584\n> var\n[1] 0.435058\n\nC<-2.9\nB<-0.3\n\n> t\n[1] 0.5789365\n> s\n[1] 5.320707\n\nu+(((s*var)/2)*(t^(2*H-1)))\n\n\nt<-log10(seq(length=100, from=1, to=100))    #time parameter (ms)\ns<-log10(seq(length=100, from=1, to=254000)) #space parameter (bytes^-1)\n\nBw<-function(t,s) {u+(((s*var)/2)*(t^(2*H-1)))}   \nz<-outer(t,s,Bw) # La función outer evalua la función Bw en cada punto (si,tj)\n\npersp((t),(s),(z),theta=20,phi=-0,col =\"lightblue\", sub=\"Ancho de Banda Efectivo de un proceso con movimiento fractal browniano\"\n      ,ticktype =\"detailed\",xlab=\"t (ms)\",ylab=\"s\",zlab=\"(s,t)\")  \n\nBwboot<-boot(dataKb,Bw,R=100)\nboot.ci(Bwboot, type = \"all\")\n\nnormalci<-u+c(-1,1)*qnorm(0.95)*sqrt(var)/512\nnormalci\n\n````\n\n\n###Movimiento FraccionalBrowniano\n````{r}\nC<-2.9\nB<-0.3\nu<-1.591\nvar<-0.4350589  \nH<-0.7164\nn<-512\n\nt<-(B/(C-u))*(H/(1-H))      \ns<-(B+(C-u)*t)/(var*t^(2*H)) \nt\ns\n\nBw_MFB<-u+(((s*var)/2)*(t^(2*H-1)))\nBw_MFB\n\nt<-log10(seq(length=100, from=1, to=100))    #time parameter (ms)\ns<-log10(seq(length=100, from=1, to=254000)) #space parameter (bytes^-1)\n\nBw<-function(t,s) {u+(((s*var)/2)*(t^(2*H-1)))}   \nz<-outer(t,s,Bw) # La función outer evalua la función Bw en cada punto (si,tj)\n\npersp((t),(s),(z),theta=20,phi=-0,col =\"lightblue\", sub=\"Ancho de Banda Efectivo de un proceso con movimiento fractal browniano\"\n      ,ticktype =\"detailed\",xlab=\"t (ms)\",ylab=\"s\",zlab=\"(s,t)\")  \n\npersp((t),(s),(z),theta=20,phi=-0,col =cm.colors(100), sub=\"Ancho de Banda Efectivo de un proceso con movimiento fractal browniano\"\n      ,ticktype =\"simple\",xlab=\"t (ms)\",ylab=\"s\",zlab=\"(s,t)\") \n\ndataBw<-u+(((s*var)/2)*(t^(2*H-1)))\nsd<-sqrt((1/(n-1)*(sum((dataBw-Bw_MFB)^2))))\n\n\nnormalci<-Bw_MFB+c(-1,1)*qnorm(0.95)*sd/sqrt(n)\nnormalci\n\nn\n\n\n````\n\n### Procesos LDR \n####F-ARIMA(p,d,q)\n\n````{r}\n#Simulación procesos LDR\n\n#Población\ndataKb<-belly/100\nsummary(dataKb)\n#Muestra 512\nsummary(set_belly)\n\np<-max(dataKb)  #taza pico de la traza\nl<-mean(dataKb) #taza promedio de tráfico\nvar<-var(dataKb)#Varianza de la traza\n\nH<-data.frame(RS@hurst)$H[1]  #Parámetro Hurst de la traza\nb<-(p-l)/var                  #Medida de ráfagas (burstiness)\n\nplot(dataKb, type=\"l\",ylim=c(0,4.70),xlab=\"time\",ylab=\"Kbps\")\ntext(3000,4.50,\"b=6.710393, H=0.7164\")\n\nutil<-0.95    #Parámetro de utilización 0<p<1\n\nn = 3000\nd = H - 0.5\n\nset.seed(1953)\nf = farimaSim(n, model = list(d = 0.2))\nplot(f, main=\"F-Arima Model (p,d,q)\")\n\t\n````\n\n##Ancho de banda efectivo para una fuente de video MPEG\n###Traza MPEG 4 \nA continuación se modela una traza de video comprimido en MPEG 4. Esta traza tiene: 89998 frames, tiene una duración de 3600 seg y fue capturada Tue Oct 10 04:43:28 2000. \n\n\n```{r echo=FALSE}\nmpeg<-read.csv(\"C:/Users/NataliaA/Documents/Maestria/Tráfico L3/MPEG/Terse_StarWarsIV.dat\",\n               header=TRUE,sep=\";\",na.strings=\"NA\",dec=\".\")\n\ndatampeg<-data.frame(Bits=head(mpeg$X919,89997))\n\ndata<-head(datampeg,250)\ntime<-(seq(length=250, from=1, to=10))    #time parameter (s)\n\nset<-data.frame(time,data)\nplot(set, type=\"h\",ylab=\"bits/frame\",xlab=\"time (secs)\",main=\"Dataset de película Star Wars MPEG-4\")\n````\n\nLa anterior traza corresponde a frames de video producidos a una frecuencia constante de 25 frames por segundo, es generada por un codificador de video de MPEG fuertemente influenciado por la combinación de codificaciones intra e interframe que se utiliza para la codificación de la secuencia de imágenes. \n\nHay tres tipos de imágenes intra **(I)** que se codifican sin ninguna dreferencia d eotras imágenes, las imágenes codificadas predictivamente **(P)** están codificadas mas eficientemente utilizando la predicción compensada en movimiento de la imágen P o I inmediatamente anterior, las imágenes **B** son las codificadas bidireccionalmente y alcanzan mayor nivel de compresión empleando como referencia la compensación de movimiento de las imágenes P o I inmediatamente anterior y posterior. Este grupo de imágenes forma el grupo de imágenes **(GOP)** definido por la distancia L entre imágenes I y la distancia M entre imágenes P.\n\nLa calidad de imágen depende del paso de cuantificación q. Con una estructura GOP de 12 frames: IBBPBBPBBPBB. Este codificador trabaja con parámetros: L=11, M=3, q=5. \n\nSuponiendo que una fuente instantanea produce b unidades de datos en tiempos aleatorios dados por $\\{Ud+id,i=0,1,...\\}$, donde $U$ es una variable aleatoria y es uniformemente distribuida en [0,1]\n\n![Alt text](C:/Users/NataliaA/Documents/DataR/periodic_source.jpg)\n\nConsiderando la definición de ancho de banda efectivo [3]:\n$$\\alpha P(s,t)=\\frac{b}{t}\\left\\lfloor\\frac{t}{d}\\right\\rfloor+\\frac{1}{st}log\\left(1+\\left(\\frac{t}{d}-\\left\\lfloor\\frac{t}{d}\\right\\rfloor\\right)(e^{bs}-1)\\right)$$\\\n\nPor lo tanto la superposición de una fuente periódica y una fuente con una tasa de bit constante ($/lambda$) es:\n\n$$\\alpha (s,t)= \\lambda + \\alpha P(s,t)$$\n\n````{r}\nl<-143.516  #bits per second\nd<-0.5      #seconds\nb<-40000    #bits\n\ntime<-(seq(length=100, from=1, to=20))    #time parameter (ms)\nspace<-(seq(length=100, from=2.8, to=20)) #space parameter (bytes^-1)\n\nt<-log(time)\ns<-log(log(space))\n````\n\nLos ejes tienen escala doble logarítmica con s en unidades de $bytes^-1$, t en segundos y $\\alpha(s,t)$ en bytes por segundo.\n\n````{r}\nBwmpeg<-function(t,s) {l+((b/t)*floor(t/d))+((1/(s*t))*log10(1+((t/d)-floor(t/d))*(exp(b*s)-1)))}   \n\nz<-outer(t,s,Bwmpeg) # La función outer evalua la función Bw en cada punto(si,tj)\n\npersp((t),(s),(z),theta=20,phi=-0,col =\"lightblue\", \n      sub=\"Ancho de Banda Efectivo de una traza de video MPEG-4\"\n      ,ticktype =\"detailed\",xlab=\"t (ms)\",ylab=\"s\",zlab=\"(s,t)\")  \n````\n\nlibrary(rgl)\npersp3d((t),(s),(z),theta=20,phi=-0,col =\"lightblue\",ticktype =\"detailed\",\n        front=\"lines\",xlab=\"t (ms)\",ylab=\"s\",zlab=\"(s,t)\")  \n\n\n##Referencias\n[1] Ravinovitch, Statistical Estimation of Effective Bandwidth. Concordia University. 2000\n\n[2]García, Contribución al Desarrollo de Herramientas Estratégicas para el Diseño,Dimensionado y Evaluación de Redes de Telecomunicación de Banda Ancha. 2009\n\n[3]Gibbens, Traffic characterisation and effective bandwidths for broadband network traces.\n\n[4]Bermolen Paola, Ancho de Banda Efectivo para flujos markovianos.2003\n\n",
    "created" : 1431559604678.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1748705623",
    "id" : "2F9731C",
    "lastKnownWriteTime" : 1449962335,
    "path" : "~/GitHub/Dimensionamiento-Redes/Actividad 3/BW_Efectivo.rmd",
    "project_path" : "BW_Efectivo.rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_markdown"
}